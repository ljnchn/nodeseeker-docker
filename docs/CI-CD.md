# CI/CD é…ç½®è¯´æ˜

## GitHub Actions å·¥ä½œæµ

æœ¬é¡¹ç›®ä½¿ç”¨ GitHub Actions è¿›è¡Œè‡ªåŠ¨åŒ–æ„å»ºå’Œéƒ¨ç½²ï¼Œé…ç½®æ–‡ä»¶ä½äº `.github/workflows/docker-build.yml`ã€‚

### ğŸš€ è§¦å‘æ¡ä»¶

å·¥ä½œæµåœ¨ä»¥ä¸‹æƒ…å†µä¸‹è‡ªåŠ¨è§¦å‘ï¼š

- **æ¨é€åˆ°ä¸»åˆ†æ”¯**: `main`, `develop`
- **åˆ›å»ºæ ‡ç­¾**: `v*` (å¦‚ v1.0.0, v2.1.3)
- **Pull Request**: å‘ `main` åˆ†æ”¯æäº¤ PR

### ğŸ”„ å·¥ä½œæµç¨‹

1. **ä»£ç æ£€å‡ºå’Œç¯å¢ƒå‡†å¤‡**
   - æ£€å‡ºä»£ç 
   - è®¾ç½® Bun è¿è¡Œæ—¶ç¯å¢ƒ
   - ç¼“å­˜ä¾èµ–ä»¥åŠ é€Ÿæ„å»º

2. **ä»£ç è´¨é‡æ£€æŸ¥**
   - å®‰è£…é¡¹ç›®ä¾èµ–
   - è¿è¡Œæµ‹è¯•å¥—ä»¶
   - æ„å»ºåº”ç”¨ç¨‹åº

3. **Docker é•œåƒæ„å»º**
   - å¤šå¹³å°æ„å»º (linux/amd64, linux/arm64)
   - è‡ªåŠ¨æ ‡ç­¾ç®¡ç†
   - æ¨é€åˆ° GitHub Container Registry

4. **å®‰å…¨æ‰«æ**
   - ä½¿ç”¨ Trivy è¿›è¡Œæ¼æ´æ‰«æ
   - ç»“æœä¸Šä¼ åˆ° GitHub Security é¢æ¿

### ğŸ·ï¸ é•œåƒæ ‡ç­¾ç­–ç•¥

- `main` åˆ†æ”¯ â†’ `latest` æ ‡ç­¾
- `develop` åˆ†æ”¯ â†’ `develop` æ ‡ç­¾
- ç‰ˆæœ¬æ ‡ç­¾ â†’ å¯¹åº”ç‰ˆæœ¬å· (v1.0.0 â†’ 1.0.0, 1.0, 1)
- Pull Request â†’ `pr-{number}` æ ‡ç­¾

### ğŸ“¦ é•œåƒä»“åº“

é•œåƒæ¨é€åˆ° GitHub Container Registry:
```
ghcr.io/{username}/{repository}:latest
```

### ğŸ”§ æœ¬åœ°ä½¿ç”¨

```bash
# æ‹‰å–æœ€æ–°é•œåƒ
docker pull ghcr.io/{username}/nodeseeker-docker:latest

# è¿è¡Œå®¹å™¨
docker run -d \
  --name nodeseeker \
  -p 3010:3010 \
  -v ./data:/app/data \
  -e JWT_SECRET=your-secret-key \
  ghcr.io/{username}/nodeseeker-docker:latest
```

### âš¡ æ€§èƒ½ä¼˜åŒ–

- **ä¾èµ–ç¼“å­˜**: Bun ä¾èµ–å’Œ Docker å±‚ç¼“å­˜
- **å¤šé˜¶æ®µæ„å»º**: ä¼˜åŒ–é•œåƒå¤§å°
- **å¹¶è¡Œæ„å»º**: å¤šå¹³å°åŒæ—¶æ„å»º

### ğŸ›¡ï¸ å®‰å…¨ç‰¹æ€§

- **æƒé™æ§åˆ¶**: æœ€å°åŒ– GitHub Token æƒé™
- **æ¼æ´æ‰«æ**: è‡ªåŠ¨æ£€æµ‹å®‰å…¨é—®é¢˜
- **é root ç”¨æˆ·**: å®¹å™¨å†…ä½¿ç”¨éç‰¹æƒç”¨æˆ·è¿è¡Œ

### ğŸ“‹ ç¯å¢ƒå˜é‡

CI/CD è¿‡ç¨‹ä¸­éœ€è¦çš„ç¯å¢ƒå˜é‡ï¼š

- `GITHUB_TOKEN`: GitHub è‡ªåŠ¨æä¾›ï¼Œç”¨äºæ¨é€é•œåƒ
- `JWT_SECRET`: è¿è¡Œæ—¶éœ€è¦ï¼Œåœ¨éƒ¨ç½²æ—¶è®¾ç½®

### ğŸ” ç›‘æ§å’Œæ—¥å¿—

- GitHub Actions æä¾›è¯¦ç»†çš„æ„å»ºæ—¥å¿—
- å®‰å…¨æ‰«æç»“æœåœ¨ Security æ ‡ç­¾é¡µæŸ¥çœ‹
- é•œåƒä¿¡æ¯åœ¨ Packages é¡µé¢ç®¡ç†